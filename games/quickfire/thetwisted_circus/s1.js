		var gameCode = ""; 
        var doExtCall = false;

				var siteSettings = {};
		siteSettings.casinoName = "Casino";
		siteSettings.regCasinoName = "QuickFire Casino";
		siteSettings.oldRegCasinoName = "Quickfire Casino";
		siteSettings.gamingGroupName = "";
		siteSettings.serverId = "1867";
		siteSettings.demoServerId = "0";
		siteSettings.language = "REPLACE_LANG";
		siteSettings.theme = "quickfiressl";
		siteSettings.variant = "mal-demo";
		siteSettings.regMarket = "";
		siteSettings.system = "aurora";
		siteSettings.clientType = "1";
		siteSettings.enableBonusBubble = "0";
		siteSettings.bonusBubbleType = "0";
		siteSettings.requiredFlashVersion = "10,0,0,0";
		siteSettings.flashPlayerDownloadUrl = "http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash";
		siteSettings.flashOCXContentVersion = "10";
		siteSettings.flashOCXMajorRevision = "0";
		siteSettings.flashOCXMinorRevision = "0";
		siteSettings.faxControlAllowed = ("False" == "True" );
		siteSettings.faxControlRequired = ("False" == "True" );
		siteSettings.fsControlRequired = ("False" == "True" );
		siteSettings.mpfMode = ("True" == "True" );
		siteSettings.mpfRequired = "False";
		siteSettings.sgiMode = ("False" == "True" );
		siteSettings.useRMM = ("True" == "True" );
		siteSettings.useOpenId = ("False" == "True" );
		siteSettings.trackingEnabled = ("True" == "True" );
		siteSettings.enableDefaultShortcut = ("0" == "1" );
		siteSettings.debug = ("False" == "True" );
		siteSettings.defaultWmode = "opaque";
		siteSettings.eulaUrl = "http://www.microgaming.co.uk/eula.aspx?ISOCode=EN";
		siteSettings.allowResolutionLocking = ("1" == "1");
		siteSettings.allowBrandMigration = ("1" == "1");
		siteSettings.maxWidth = 1280;
		siteSettings.maxHeight = 768;
		siteSettings.allowBlockedPopupWarning = ("0" == "1" );
		siteSettings.reverseProxy = "";
		siteSettings.topbarReflectionURL = "TopBarReflection.xml";
		siteSettings.statsServiceEnabled = ("True" == "True" );
		siteSettings.resetShortCut = "";
		siteSettings.migrationStatus = "1";

		var startupSettings = {};
		startupSettings.sessionGuid = "76e97651-8748-45b2-bb9a-2ffce9d661e6";
		startupSettings.systemSwf = "Loader.swf";
		startupSettings.extUsername = "demo";
		startupSettings.extPassword = "demo";
		startupSettings.gameType = "";
		startupSettings.gameId = "TheTwistedCircus";
		startupSettings.mid = "";
		startupSettings.cid = "";
		startupSettings.extGameId = "";
		startupSettings.xmanSessionId = "";
		startupSettings.xmanSessionNumber = "";
		startupSettings.xmanSessionToken = "";
		startupSettings.extSessionUserid = "";
		startupSettings.extAuthType = "";
		startupSettings.frameType = "";
		startupSettings.loginType = "";
		startupSettings.userType = "";
		startupSettings.addButtons = "";
		startupSettings.removeButtons = "";
		startupSettings.extReturnUrl = "";
		startupSettings.extGamelist = "";
		startupSettings.authToken = "";
		startupSettings.mpTournamentID = "";
		startupSettings.mpServiceID = "";
		startupSettings.autoLogin = "-1";
		startupSettings.muteSound = "-1";
		startupSettings.launchInFunMode = "0";
		startupSettings.configFile = "Config";
		startupSettings.displayConfigFile = "DisplayConfig";
		startupSettings.debuggerType = "1";
		startupSettings.debugLevelsFile = "levels.xml";
		startupSettings.preloaderFile = "preloader.swf";
		startupSettings.preloaderType = "1";
		startupSettings.standaloneDownloadUrl = "";
		startupSettings.browserLang = "ru-RU,ru;q=0.8,en-US;q=0.6,en;q=0.4";
		startupSettings.userIp = "31.131.103.75";
		startupSettings.defaultShortcutURL = "https://quickfire2.gameassists.co.uk/quickfiresslen/default.aspx?sext1=demo&sext2=demo&csid=1867&gameid=thetwistedcircus&ul=en&theme=quickfiressl&variant=mal-demo";
		startupSettings.killFramesetOnRelocate = "1";
		startupSettings.hGames = "";
		startupSettings.protocolPrefix = "https://";
		startupSettings.isQuickRedirect = "true";
		startupSettings.participationCode = "";
		startupSettings.incompleteGamesShowing = "";
		startupSettings.externalReturn = "";
		startupSettings.extMigration = "0";
		startupSettings.autoShowLogin = "0";
		startupSettings.openAppAfterLogin = "";
		startupSettings.NotifierId = "_";
		startupSettings.customheadervalue = "";
		startupSettings.hideValueAdds = "";
		startupSettings.showValueAdds = "";
		startupSettings.MenuConfigXML = "";
		startupSettings.MenuArtFile = "";
		startupSettings.BrandingOverlayName = "";
		startupSettings.FrameLibName = "";
		startupSettings.PlayForRealfile = "";
		startupSettings.DiagCompFile = "";
		startupSettings.UCSfile = "";
		startupSettings.flyoutxml = "";
		startupSettings.displayconfigxml = "";
		startupSettings.widescreen = "False";
		startupSettings.preloaderText = "LOADING";
		startupSettings.t3Game = "false";
		startupSettings.defaultFrame = ("False" == "True" );
		startupSettings.enablePerformanceRating = "True";
		startupSettings.numberOfIterations = "600000";
		startupSettings.targetUrl = "https://xplay2.gameassists.co.uk/Xman/x.x";
		startupSettings.lobbytype = "0";

		var urlSettings = {};
		urlSettings.basePath = "System/";
		urlSettings.queryString = "sext1=demo&sext2=demo&csid=1867&gameid=thetwistedcircus&bc=config-quickfiressl--en--MAL-Demo";
		urlSettings.safeQueryString = "csid=1867";
		urlSettings.applicationPath = "/quickfiresslen";
		urlSettings.baseUrlPath = "https://quickfire2.gameassists.co.uk/quickfiresslen/";
		urlSettings.casinoBaseUrl = "https://quickfire2.gameassists.co.uk/quickfiresslen/default.aspx";
		urlSettings.casinoFullUrl = "https://quickfire2.gameassists.co.uk/quickfiresslen/default.aspx?sext1=demo&sext2=demo&csid=1867&gameid=thetwistedcircus&ul=en&theme=quickfiressl&variant=mal-demo";
		urlSettings.casinoSafeUrl = "https://quickfire2.gameassists.co.uk/quickfiresslen/default.aspx?csid=1867&ul=en&theme=quickfiressl&variant=mal-demo";
		urlSettings.casinoErrorReturnUrl = "/quickfiresslen/default.aspx?sext1=demo&sext2=demo&csid=1867&gameid=thetwistedcircus&bc=config-quickfiressl--en--MAL-Demo";

		var bTagSettings = {};
		bTagSettings.bTag = "FS_NOTAG";
		bTagSettings.bTag2 = "";
		bTagSettings.bTag3 = "";
		bTagSettings.bTag4 = "";
		bTagSettings.bTag5 = "";

		var aspStrings = {};
		aspStrings.SHORCUT_TEXT = "Would you like to add a shortcut to the casino to your desktop?";
		aspStrings.SHORCUT_TITLE = "Create a Desktop Shortcut";

		var pcmSteps = {};
		pcmSteps.createGuid = {id:"25", allow:"1"};
		pcmSteps.attemptActivation = {id:"32", allow:"1"};
		pcmSteps.failedActivation = {id:"33", allow:"1"};
		pcmSteps.successfullActivation = {id:"34", allow:"1"};
		pcmSteps.successfullLogin = {id:"35", allow:"1"};
		pcmSteps.failedLogin = {id:"36", allow:"1"};
		pcmSteps.popupBlocked = {id:"1246", allow:"1"};
		pcmSteps.popupWarning = {id:"1247", allow:"1"};
		pcmSteps.popupSuccess = {id:"1248", allow:"1"};
		pcmSteps.gameInitialized = {id:"1428", allow:"1"};
		pcmSteps.gameDownloaded = {id:"1429", allow:"1"};
		pcmSteps.loginWithMigrate = {id:"1700", allow:"1"};
		pcmSteps.loginAfterMigrate = {id:"1705", allow:"1"};
		pcmSteps.failedTokenLogin = {id:"2384", allow:"1"};
		pcmSteps.successfulTokenLogin = {id:"2385", allow:"1"};
		pcmSteps.userDisconnected = {id:"2642", allow:"1"};
		pcmSteps.userTimedOut = {id:"2643", allow:"1"};
		pcmSteps.userAccountLocked = {id:"2747", allow:"1"};
		pcmSteps.casinoErrors = {id:"2793", allow:"1"};
		pcmSteps.browserClosed = {id:"2847", allow:"1"};
		pcmSteps.externalPageLaunch = {id:"2866", allow:"1"};
		pcmSteps.bankingUsage = {id:"2876", allow:"1"};
		pcmSteps.cacheDetection = {id:"2921", allow:"1"};
		pcmSteps.funBonusModeSwitch = {id:"2631", allow:"1"};
		pcmSteps.funBonusTutorialLaunch = {id:"2632", allow:"1"};

		var pcmSettings = {};
		pcmSettings.pcmGuid = "";
		pcmSettings.paramName = "trackingGUID";

		var mpfSetupSettings = {};
		mpfSetupSettings.hostHelper = "mgsComms";
		mpfSetupSettings.raptor_XmanURL = "https://xplay2.gameassists.co.uk/Xman/x.x";
		mpfSetupSettings.clientType = "1";
		mpfSetupSettings.compressionType = "5";
		mpfSetupSettings.mpvPolicyPort = "843";
		mpfSetupSettings.mpvServerHost = "mpv-router3flash.valueactive.eu";
		mpfSetupSettings.mpvServerLobbyHost = "mpv-lobby3flash.valueactive.eu";
		mpfSetupSettings.mpvPortRange = "443-443";
		mpfSetupSettings.mpvLobbyPort = "443";
		mpfSetupSettings.mpvLobbyPortType = "BINARY";
		mpfSetupSettings.mpvPortType = "BINARY";
		mpfSetupSettings.mpvPortSsl = "true";
		mpfSetupSettings.mpvLobbyPortSsl = "true";
		mpfSetupSettings.toggleLogging = "true";
		mpfSetupSettings.swfHost = "WEB_MPV";

		var rmmSettings = {};
		rmmSettings.templateUrl = "https://redirector3.valueactive.eu/casino/default.aspx?applicationID=1016&directLaunch=1";

		var statNames = {};
		statNames.failedLogin = {statsNamespace:"failedlogin"};
		statNames.browserClosed = {statsNamespace:"casinoclosed"};
		statNames.avgSpeed = {statsNamespace:"avgspeed"};


	
		document.onkeydown = function (e)
		{
			//different events exists in different browsers
			var keyValue = 0;
			var evtObject = window.event;
			if (evtObject)
			{
				keyValue = evtObject.keyCode;
			}
			else
			{
				evtObject = e;
				keyValue = e.which;
			}
			
			//check for a CTRL+N combination
			if ((evtObject.ctrlKey) && (keyValue == 78))
			{
				evtObject.cancelBubble = true;
				evtObject.returnValue = false;
				return false;
			}
			return true;
		}

        //default strings for the alert boxes
		var alertText = "Closing Casino";
        var finalText = "Close Required";
        var tempValue = 0;
		var browserUnloadEvent = false;
		var hasClosePageAlert = "False";
	    var disableBeforeUnload = false;
	    //feature-detection as opposed to browser-detection

		if (window.attachEvent != null)
		{
		    window.attachEvent("onbeforeunload", Close);
		}
		else
		{
		    window.addEventListener("beforeunload", Close);
		}

		function Close(evt)
		{
		    if (!disableBeforeUnload) {
			browserUnloadEvent = true;
		    //Close down the flash system.
		    if (hasClosePageAlert.toLowerCase() == "true")
		    {
					
		        var sysFlashMovie = $('#system')[0];
                sysFlashMovie.focus();
                sysFlashMovie.attemptLogoutCloseGame(doExtCall);
				closeSession();			
				//Chromium does not support the alert dialog - but the pkt is sent in time. 
		       alert(this.alertText);
            }

            //notify that the casino is closing
            onCasinoClosing();

				window.removeEventListener("beforeunload", Close);
			}
		}
